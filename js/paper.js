// Generated by CoffeeScript 1.3.3
var Camera,Controller,Element3D,Vector3D,controller,__bind=function(e,t){return function(){return e.apply(t,arguments)}},__slice=[].slice;Vector3D=function(){function e(e,t,n){this.x=e!=null?e:0;this.y=t!=null?t:0;this.z=n!=null?n:0;this}e.prototype.set=function(e,t,n){this.x=e;this.y=t;this.z=n;return this};e.prototype.setX=function(e){this.x=e;return this};e.prototype.setY=function(e){this.y=e;return this};e.prototype.setZ=function(e){this.z=e;return this};e.prototype.add=function(e){this.x+=e.x;this.y+=e.y;this.z+=e.z;return this};e.prototype.addScalar=function(e){this.x+=e;this.y+=e;this.z+=e;return this};e.prototype.sub=function(e){this.x-=e.x;this.y-=e.y;this.z-=e.z;return this};e.prototype.subScalar=function(e){this.x-=e;this.y-=e;this.z-=e;return this};e.prototype.multiply=function(e){this.x*=e.x;this.y*=e.y;this.z*=e.z;return this};e.prototype.multiplyScalar=function(e){this.x*=e;this.y*=e;this.z*=e;return this};e.prototype.divide=function(e){this.x/=e.x;this.y/=e.y;this.z/=e.z;return this};e.prototype.divideScalar=function(e){if(e){this.x/=e;this.y/=e;this.z/=e}else{this.x=0;this.y=0;this.z=0}return this};e.prototype.negate=function(){return this.multiplyScalar(-1)};e.prototype.dot=function(e){return this.x*e.x+this.y*e.y+this.z*e.z};e.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y+this.z*this.z};e.prototype.length=function(){return Math.sqrt(this.lengthSq())};e.prototype.lengthManhattan=function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)};e.prototype.normalize=function(){return this.divideScalar(this.length())};e.prototype.setLength=function(e){e==null&&(e=1);return this.normalize().multiplyScalar(e)};return e}();Camera=function(){function e(e,t,n,r){this.perspective=e!=null?e:300;this.perspectiveOrigin=t;this.transformStyle=n!=null?n:"preserve-3d";this.backfaceVisibility=r!=null?r:"visible"}return e}();Element3D=function(){function e(e,t){this.el=e;this.translateZ=__bind(this.translateZ,this);this.translateY=__bind(this.translateY,this);this.translateX=__bind(this.translateX,this);this.rotateZ=__bind(this.rotateZ,this);this.rotateY=__bind(this.rotateY,this);this.rotateX=__bind(this.rotateX,this);this.update=__bind(this.update,this);this.needsUpdate=!0;this.localPos=new Vector3D;this.rot=new Vector3D;this.vel=new Vector3D;this.angularVel=new Vector3D(.3,.2,.7);this.scale=new Vector3D(1,1,1)}e.prototype.update=function(){this.localPos=this.localPos.add(this.vel);this.rot=this.rot.add(this.angularVel);this.el.style["-webkit-transform"]="translateX("+this.localPos.x+") translateY("+this.localPos.y+") translateZ("+this.localPos.z+") rotateX("+this.rot.x+"deg) rotateY("+this.rot.y+"deg) rotateZ("+this.rot.z+"deg)";if(this.angularVel.length()===0&&this.vel.length()===0)return this.needsUpdate=!1};e.prototype.rotateX=function(e){this.rot.setX(e);return this.needsUpdate=!0};e.prototype.rotateY=function(e){this.rot.setY(e);return this.needsUpdate=!0};e.prototype.rotateZ=function(e){this.rot.setZ(e);return this.needsUpdate=!0};e.prototype.translateX=function(e){this.localPos.setX(e);return this.needsUpdate=!0};e.prototype.translateY=function(e){this.localPos.setY(e);return this.needsUpdate=!0};e.prototype.translateZ=function(e){this.localPos.setZ(e);return this.needsUpdate=!0};return e}();Controller=function(){function e(){this.render=__bind(this.render,this);this.registerElements=__bind(this.registerElements,this);this.registerElement=__bind(this.registerElement,this);this.objects=[];this.camera=new Camera}e.prototype.registerElement=function(e){var t;t=new Element3D(e,new Camera);this.objects.push(t);return t};e.prototype.registerElements=function(){var e,t,n,r,i;t=1<=arguments.length?__slice.call(arguments,0):[];for(r=0,i=t.length;r<i;r++){e=t[r];n=new Element3D(e,this.camera);console.log(n);this.objects.push(n)}return this.objects};e.prototype.render=function(){var e,t,n,r;typeof this.timer=="function"&&this.timer(clearTimeout(this.timer));r=this.objects;for(t=0,n=r.length;t<n;t++){e=r[t];e.needsUpdate&&e.update()}this.timer=setTimeout(this.render,16);return this};e.prototype.start=function(){return this.render()};return e}();controller=new Controller;controller.start();$("#images img").on("click",function(e){return controller.registerElement($(this)[0])});